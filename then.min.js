/**
 * thenjs: v0.12.3
 * https://github.com/teambition/then.js
 */
!function(){"use strict";function a(a){return null==a}function b(a){return"function"==typeof a}function c(a,b,c){return c=c||"array",new Error("Argument "+(a&&a.toString())+' in "'+b+'" is not a '+c+"!")}function d(a,b){var c=n.call(arguments,2);o(function(){try{b.apply(null,c)}catch(d){a(d)}})}function e(b,c,d,e){function f(f,g){return a(f)?(c[e]=g,--d.i<0&&b(null,c)):b(f)}return f._isCont=!0,f}function f(a,b,d){var f,g=[],h={};if(!p(b))return a(c(b,"each"));if(h.i=f=b.length-1,0>f)return a(null,g);for(var i=0;f>=i;i++)d(e(a,g,h,i),b[i],i,b)}function g(a,b){var d,f=[],g={};if(!p(b))return a(c(b,"parallel"));if(g.i=d=b.length-1,0>d)return a(null,f);for(var h=0;d>=h;h++)b[h](e(a,f,g,h),h,b)}function h(b,e,f){function g(c,k){return a(c)?(j[i]=k,++i>h?b(null,j):void d(b,f,g,e[i],i,e)):b(c)}var h,i=0,j=[];return g._isCont=!0,p(e)?(h=e.length-1,0>h?b(null,j):void f(g,e[i],i,e)):b(c(e,"eachSeries"))}function i(b,e){function f(c,j){return a(c)?(i[h]=j,++h>g?b(null,i):void d(b,e[h],f,h,e)):b(c)}var g,h=0,i=[];return f._isCont=!0,p(e)?(g=e.length-1,0>g?b(null,i):void e[h](f,h,e)):b(c(e,"series"))}function j(a,b){return b._isCont?b:function(){b.apply(null,[a].concat(n.call(arguments)))}}function k(){}function l(c){function d(){}function e(c){function d(){if(i._all)return i._all.apply(null,j);if(!a(c))throw c;h?h.apply(null,n.call(j,1)):i._result=j}function f(d){d.stack=d.stack||d.description,a(c)&&i._nextThen?e.call(i._nextThen,d):g||q.length?(g=g||q.shift(),g.call(null,d)):b(m.onerror)?m.onerror(d):i._result=[d]}var g,h,i=this,j=arguments;if(i._result!==!1){i._result?i._result=!1:i.debug&&(r+=1,i.debug.apply(i,["\nResult of chain "+r+": "].concat(n.call(j)))),g=i._fail?q.shift():i._error,h=i._success||i._each||i._eachSeries||i._parallel||i._series;try{d()}catch(k){f(k)}}}function l(a,b){var c=new d,f=function(){return e.apply(c,arguments)};return f._isCont=!0,a(f,b),b&&(b._nextThen=c,b._result&&o(function(){e.apply(b,b._result)})),c}var p=d.prototype=new k,q=[],r=0;return p.constructor=d,p.all=function(a){return l(function(b,c){c._all=j(b,a)},this)},p.then=function(a,b){return l(function(c,d){d._success=j(c,a),d._error=b&&j(c,b)},this)},p.fail=function(a){return l(function(b,c){c._fail=j(b,a),c._success=function(){b.apply(null,[null].concat(n.call(arguments)))},q.push(c._fail)},this)},p.each=function(a,b){return l(function(c,d){d._each=function(d,e){f(c,a||d,b||e)}},this)},p.eachSeries=function(a,b){return l(function(c,d){d._eachSeries=function(d,e){h(c,a||d,b||e)}},this)},p.parallel=function(a){return l(function(b,c){c._parallel=function(c){g(b,a||c)}},this)},p.series=function(a){return l(function(b,c){c._series=function(c){i(b,a||c)}},this)},(!c||b(c))&&(p.debug=c),l}function m(a,b){return l(b)(function(b){d(b,a,b)})}var n=[].slice,o="function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};k.prototype.debug="object"==typeof console&&function(){console.log.apply(console,arguments)},m.each=function(a,b,c){return l(c)(function(c){d(c,f,c,a,b)})},m.eachSeries=function(a,b,c){return l(c)(function(c){d(c,h,c,a,b)})},m.parallel=function(a,b){return l(b)(function(b){d(b,g,b,a)})},m.series=function(a,b){return l(b)(function(b){d(b,i,b,a)})},m.nextTick=function(a){o(a)},m.defer=d,"object"==typeof module&&"object"==typeof module.exports?module.exports=m:"function"==typeof define&&define.amd?define([],function(){return m}):"object"==typeof window&&(window.thenjs=m)}();