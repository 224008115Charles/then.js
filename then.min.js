/**
 * thenjs: v0.12.3
 * https://github.com/teambition/then.js
 */
!function(){"use strict";function a(a){return null==a}function b(a){return"function"==typeof a}function c(a,b,c){return c=c||"array",new Error("Argument "+(a&&a.toString())+' in "'+b+'" is not a '+c+"!")}function d(b,c,d,e){function f(f,g){return a(f)?(c[e]=g,--d.i<0&&b(null,c)):b(f)}return f._isCont=!0,f}function e(a,b,e){var f,g=[],h={};if(!p(b))return a(c(b,"each"));if(h.i=f=b.length-1,0>f)return a(null,g);for(var i=0;f>=i;i++)e(d(a,g,h,i),b[i],i,b)}function f(a,b){var e,f=[],g={};if(!p(b))return a(c(b,"parallel"));if(g.i=e=b.length-1,0>e)return a(null,f);for(var h=0;e>=h;h++)b[h](d(a,f,g,h),h,b)}function g(b,d,e){function f(c,j){return a(c)?(i[h]=j,++h>g?b(null,i):void o(function(){try{e(f,d[h],h,d)}catch(a){b(a)}})):b(c)}var g,h=0,i=[];return f._isCont=!0,p(d)?(g=d.length-1,0>g?b(null,i):void e(f,d[h],h,d)):b(c(d,"eachSeries"))}function h(b,d){function e(c,i){return a(c)?(h[g]=i,++g>f?b(null,h):void o(function(){try{d[g](e,g,d)}catch(a){b(a)}})):b(c)}var f,g=0,h=[];return e._isCont=!0,p(d)?(f=d.length-1,0>f?b(null,h):void d[g](e,g,d)):b(c(d,"series"))}function i(a,b){return b._isCont?b:function(){b.apply(null,[a].concat(n.call(arguments)))}}function j(){}function k(c){function d(){}function k(c){function d(){if(h._all)return h._all.apply(null,i);if(!a(c))throw c;g?g.apply(null,n.call(i,1)):h._result=i}function e(d){d.stack=d.stack||d.description,a(c)&&h._nextThen?k.call(h._nextThen,d):f||q.length?(f=f||q.shift(),f.call(null,d)):b(m.onerror)?m.onerror(d):h._result=[d]}var f,g,h=this,i=arguments;if(h._result!==!1){h._result?h._result=!1:h.debug&&(r+=1,h.debug.apply(h,["\nResult of chain "+r+": "].concat(n.call(i)))),f=h._fail?q.shift():h._error,g=h._success||h._each||h._eachSeries||h._parallel||h._series;try{d()}catch(j){e(j)}}}function l(a,b){var c=new d,e=function(){return k.apply(c,arguments)};return e._isCont=!0,a(e,b),b&&(b._nextThen=c,b._result&&o(function(){k.apply(b,b._result)})),c}var p=d.prototype=new j,q=[],r=0;return p.constructor=d,p.all=function(a){return l(function(b,c){c._all=i(b,a)},this)},p.then=function(a,b){return l(function(c,d){d._success=i(c,a),d._error=b&&i(c,b)},this)},p.fail=function(a){return l(function(b,c){c._fail=i(b,a),c._success=function(){b.apply(null,[null].concat(n.call(arguments)))},q.push(c._fail)},this)},p.each=function(a,b){return l(function(c,d){d._each=function(d,f){e(c,a||d,b||f)}},this)},p.eachSeries=function(a,b){return l(function(c,d){d._eachSeries=function(d,e){g(c,a||d,b||e)}},this)},p.parallel=function(a){return l(function(b,c){c._parallel=function(c){f(b,a||c)}},this)},p.series=function(a){return l(function(b,c){c._series=function(c){h(b,a||c)}},this)},(!c||b(c))&&(p.debug=c),l}function l(a,b,c,d){o(function(){try{a(b,c,d)}catch(e){b(e)}})}function m(a,b){return k(b)(function(b){l(a,b)})}var n=[].slice,o="function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};j.prototype.debug="object"==typeof console&&function(){console.log.apply(console,arguments)},m.each=function(a,b,c){return k(c)(function(c){l(e,c,a,b)})},m.eachSeries=function(a,b,c){return k(c)(function(c){l(g,c,a,b)})},m.parallel=function(a,b){return k(b)(function(b){l(f,b,a)})},m.series=function(a,b){return k(b)(function(b){l(h,b,a)})},m.nextTick=function(a){o(a)},"object"==typeof module&&"object"==typeof module.exports?module.exports=m:"function"==typeof define&&define.amd?define([],function(){return m}):"object"==typeof window&&(window.thenjs=m)}();