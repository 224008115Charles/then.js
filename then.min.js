/**
 * thenjs: v0.12.3
 * https://github.com/teambition/then.js
 */
!function(){"use strict";function a(a){return null==a}function b(a){return"function"==typeof a}function c(a,b,c){return c=c||"array",new Error("Argument "+(a&&a.toString())+' in "'+b+'" is not a '+c+"!")}function d(b,c,d,e){function f(f,g){return a(f)?(c[e]=g,--d.i<0&&b(null,c)):b(f)}return f._isCont=!0,f}function e(a,b,e){var f,g=[],h={};if(!r(b))return a(c(b,"each"));if(h.i=f=b.length-1,0>f)return a(null,g);for(var i=0;f>=i;i++)e(d(a,g,h,i),b[i],i,b)}function f(a,b){var e,f=[],g={};if(!r(b))return a(c(b,"parallel"));if(g.i=e=b.length-1,0>e)return a(null,f);for(var h=0;e>=h;h++)b[h](d(a,f,g,h),h,b)}function g(b,d,e){function f(c,j){return a(c)?(i[h]=j,++h>g?b(null,i):void q(function(){try{e(f,d[h],h,d)}catch(a){b(a)}})):b(c)}var g,h=0,i=[];return f._isCont=!0,r(d)?(g=d.length-1,0>g?b(null,i):void e(f,d[h],h,d)):b(c(d,"eachSeries"))}function h(b,d){function e(c,i){return a(c)?(h[g]=i,++g>f?b(null,h):void q(function(){try{d[g](e,g,d)}catch(a){b(a)}})):b(c)}var f,g=0,h=[];return e._isCont=!0,r(d)?(f=d.length-1,0>f?b(null,h):void d[g](e,g,d)):b(c(d,"series"))}function i(a,b){return b._isCont?b:function(){b.apply(null,[a].concat(p.call(arguments)))}}function j(){}function k(c){function d(){}function k(b){function c(){if(g._all)return g._all.apply(null,h);if(!a(b))throw b;f?f.apply(null,p.call(h,1)):g._result=h}function d(c){c.stack=c.stack||c.description,a(b)&&g._nextThen?k.call(g._nextThen,c):e||n.length?(e=e||n.shift(),e.call(null,c)):o.onerror?o.onerror(c):g._result=[c]}var e,f,g=this,h=arguments;if(g._result!==!1){g._result?g._result=!1:g.debug&&(r+=1,g.debug.apply(g,["\nResult of chain "+r+": "].concat(p.call(h)))),e=g._fail?n.shift():g._error,f=g._success||g._each||g._eachSeries||g._parallel||g._series;try{c()}catch(i){d(i)}}}function l(a,b){function c(){return k.apply(e,arguments)}var e=new d;return c._isCont=!0,a(c,b),b&&(b._nextThen=e,b._result&&q(function(){k.apply(b,b._result)})),e}var m=d.prototype=new j,n=[],r=0;return m.constructor=d,(!c||b(c))&&(m.debug=c),b(o.onerror)||(o.onerror=null),m.all=function(a){return l(function(b,c){c._all=i(b,a)},this)},m.then=function(a,b){return l(function(c,d){d._success=i(c,a),d._error=b&&i(c,b)},this)},m.fail=function(a){return l(function(b,c){c._fail=i(b,a),c._success=function(){b.apply(null,[null].concat(p.call(arguments)))},n.push(c._fail)},this)},m.each=function(a,b){return l(function(c,d){d._each=function(d,f){e(c,a||d,b||f)}},this)},m.eachSeries=function(a,b){return l(function(c,d){d._eachSeries=function(d,e){g(c,a||d,b||e)}},this)},m.parallel=function(a){return l(function(b,c){c._parallel=function(c){f(b,a||c)}},this)},m.series=function(a){return l(function(b,c){c._series=function(c){h(b,a||c)}},this)},l}function l(a,b,c,d){q(function(){try{a(b,c,d)}catch(e){b(e)}})}function m(a){return function(b,c,d){return k(d)(function(d){l(a,d,b,c)})}}function n(a){return function(b,c){return k(c)(function(c){l(a,c,b)})}}function o(a,b){return k(b)(function(b){l(a,b)})}var p=[].slice,q="function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},r=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};j.prototype.debug="object"==typeof console&&function(){console.log.apply(console,arguments)},o.nextTick=function(a){q(a)},o.each=m(e),o.eachSeries=m(g),o.parallel=n(f),o.series=n(h),"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof window&&(window.thenjs=o)}();