/**
 * thenjs: v0.12.4
 * https://github.com/teambition/then.js
 */
!function(){"use strict";function a(a){return null==a}function b(a){return"function"==typeof a}function c(a,b,c){return new Error("Argument "+(a&&a.toString())+' in "'+b+'" is not a '+(c||"array")+"!")}function d(a,b){try{b.apply(null,o.call(arguments,2))}catch(c){a(c)}}function e(a,b){var c=o.call(arguments,2);p(function(){try{b.apply(null,c)}catch(d){a(d)}})}function f(b,c,d,e){function f(f,g){return a(f)?(c[e]=g,--d.i<0&&b(null,c)):b(f)}return f._isCont=!0,f}function g(a,b,d){var e,g=[],h={};if(!q(b))return a(c(b,"each"));if(h.i=e=b.length-1,0>e)return a(null,g);for(var i=0;e>=i;i++)d(f(a,g,h,i),b[i],i,b)}function h(a,b){var d,e=[],g={};if(!q(b))return a(c(b,"parallel"));if(g.i=d=b.length-1,0>d)return a(null,e);for(var h=0;d>=h;h++)b[h](f(a,e,g,h),h,b)}function i(b,f,g){function h(c,o){return a(c)?(l[k]=o,++k>i?b(null,l):(j=--m?d:(m=n.maxTickDepth,e),void j(b,g,h,f[k],k,f))):b(c)}var i,j,k=0,l=[],m=n.maxTickDepth;return h._isCont=!0,q(f)?(i=f.length-1,0>i?b(null,l):void g(h,f[k],k,f)):b(c(f,"eachSeries"))}function j(b,f){function g(c,m){return a(c)?(k[j]=m,++j>h?b(null,k):(i=--l?d:(l=n.maxTickDepth,e),void i(b,f[j],g,j,f))):b(c)}var h,i,j=0,k=[],l=n.maxTickDepth;return g._isCont=!0,q(f)?(h=f.length-1,0>h?b(null,k):void f[j](g,j,f)):b(c(f,"series"))}function k(a,b){return b._isCont?b:function(){b.apply(null,[a].concat(o.call(arguments)))}}function l(){}function m(c){function d(){}function e(c){function d(){if(i._all)return i._all.apply(null,j);if(!a(c))throw c;h?h.apply(null,o.call(j,1)):i._result=j}function f(d){d.stack=d.stack||d.description,a(c)&&i._nextThen?e.call(i._nextThen,d):g||q.length?(g=g||q.shift(),g.call(null,d)):b(n.onerror)?n.onerror(d):i._result=[d]}var g,h,i=this,j=arguments;if(i._result!==!1){i._result?i._result=!1:i.debug&&i.debug.apply(i,["\nChain "+ ++r+": "].concat(o.call(j))),g=i._fail?q.shift():i._error,h=i._success||i._each||i._eachSeries||i._parallel||i._series;try{d()}catch(k){f(k)}}}function f(a,b){var c=new d,f=function(){return e.apply(c,arguments)};return f._isCont=!0,a(f,b),b&&(b._nextThen=c,b._result&&p(function(){e.apply(b,b._result)})),c}var m=d.prototype=new l,q=[],r=0;return m.constructor=d,m.all=function(a){return f(function(b,c){c._all=k(b,a)},this)},m.then=function(a,b){return f(function(c,d){d._success=k(c,a),d._error=b&&k(c,b)},this)},m.fail=function(a){return f(function(b,c){c._fail=k(b,a),c._success=function(){b.apply(null,[null].concat(o.call(arguments)))},q.push(c._fail)},this)},m.each=function(a,b){return f(function(c,d){d._each=function(d,e){g(c,a||d,b||e)}},this)},m.eachSeries=function(a,b){return f(function(c,d){d._eachSeries=function(d,e){i(c,a||d,b||e)}},this)},m.parallel=function(a){return f(function(b,c){c._parallel=function(c){h(b,a||c)}},this)},m.series=function(a){return f(function(b,c){c._series=function(c){j(b,a||c)}},this)},(!c||b(c))&&(m.debug=c),f}function n(a,b){return m(b)(function(b){e(b,a,b)})}var o=[].slice,p="function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},q=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};l.prototype.debug="object"==typeof console&&function(){console.log.apply(console,arguments)},n.each=function(a,b,c){return m(c)(function(c){e(c,g,c,a,b)})},n.eachSeries=function(a,b,c){return m(c)(function(c){e(c,i,c,a,b)})},n.parallel=function(a,b){return m(b)(function(b){e(b,h,b,a)})},n.series=function(a,b){return m(b)(function(b){e(b,j,b,a)})},n.nextTick=function(a){var b=o.call(arguments,1);p(function(){a.apply(null,b)})},n.defer=e,n.maxTickDepth=100,"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof window&&(window.thenjs=n)}();